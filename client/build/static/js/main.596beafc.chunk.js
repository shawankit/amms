(this.webpackJsonpcli=this.webpackJsonpcli||[]).push([[0],{115:function(e,t,a){"use strict";t.a=[{label:"Name",name:"name",type:"input",inputType:"text"},{label:"Mobile",name:"mobile",type:"input",inputType:"text"},{label:"Type",name:"type",type:"select",inputType:"text",list:"customerType"}]},116:function(e,t,a){"use strict";t.a=[{label:"Name",name:"name",type:"input",inputType:"text"},{label:"Rates",name:"rate",type:"input",inputType:"number"},{label:"Taxable",name:"taxable",type:"select",inputType:"text",list:"taxable",defaultValue:"No"},{label:"GST Rate (%)",name:"gstRate",type:"select",inputType:"number",list:"gstRate",defaultValue:0}]},161:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(11),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(120),antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(103),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(40),_common_InputField__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(62),_api__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(25),sweetalert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(36),sweetalert__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(sweetalert__WEBPACK_IMPORTED_MODULE_11__),_data_CustomerData__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(115),_common_SelectField__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(97),_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(208),_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(209),_MillBulkForm__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(200),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(4),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__),CustomerForm=function CustomerForm(_ref){var data=_ref.data,callback=_ref.callback,setEditData=_ref.setEditData,initialData=_data_CustomerData__WEBPACK_IMPORTED_MODULE_12__.a.reduce((function(e,t){return Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.name,""))}),{}),_useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(initialData),_useState2=Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),formData=_useState2[0],setFormData=_useState2[1],onChange=function(e){setFormData(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e.target.name,e.target.value)))},onSelectChange=function(e,t){setFormData(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e,t)))};Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){setFormData(data)}),[data]);var setRatesToData=function(e){setFormData(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},{rates:Object.values(e)}))},onSubmit=function(){var e=Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(t){var a,n,r,c;return _home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(formData),!data){e.next=9;break}return e.next=4,Object(_api__WEBPACK_IMPORTED_MODULE_10__.v)(data.id,formData);case 4:n=e.sent,console.log(n),1==(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.status)?sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully updated customer details","success"):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error"),e.next=14;break;case 9:return e.next=11,Object(_api__WEBPACK_IMPORTED_MODULE_10__.e)(formData);case 11:c=e.sent,console.log(c),1==(null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.status)?sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully added customer details","success"):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error");case 14:return reset(),e.next=17,callback();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reset=function(){setFormData(initialData),setEditData(null)},customerType=[{value:"normal",name:"Normal"},{value:"special",name:"Special"}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)("div",{id:"form-div",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:_data_CustomerData__WEBPACK_IMPORTED_MODULE_12__.a.map((function(field){return"input"==field.type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_common_InputField__WEBPACK_IMPORTED_MODULE_9__.a,{label:field.label,type:field.inputType,name:field.name,onChange:onChange,value:formData?formData[field.name]:""},field.name):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_common_SelectField__WEBPACK_IMPORTED_MODULE_13__.a,{label:field.label,option:eval(field.list).map((function(e){return{value:e.value,text:e.name}})),showSearch:!0,optionFilterProp:"children",value:formData?formData[field.name]:"",showArrow:!1,onChange:function(e){return onSelectChange(field.name,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())}},field.name)}))}),"special"===(null===formData||void 0===formData?void 0:formData.type)?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_MillBulkForm__WEBPACK_IMPORTED_MODULE_16__.a,{customerId:null===data||void 0===data?void 0:data.id,type:formData.type,setRatesToData:setRatesToData}):null,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_7__.a,{span:24,className:"text-right",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{onClick:function(){return reset()},className:"mr-4",icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_14__.a,{}),children:"Reset"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{type:"primary",onClick:function(){return onSubmit()},icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_15__.a,{}),children:data?"Edit":"Add"})]})})]})})};__webpack_exports__.a=CustomerForm},166:function(e,t,a){},200:function(e,t,a){"use strict";var n=a(22),r=a(3),c=a(1),i=a(5),o=a(11),_=a.n(o),l=a(0),s=a(330),u=a(120),d=a(62),b=a(25),j=(a(36),a(4)),m=s.a.Title;t.a=function(e){var t=e.customerId,a=e.type,o=e.setRatesToData,s=Object(l.useState)({}),O=Object(i.a)(s,2),p=O[0],f=O[1],h=function(){var e=Object(n.a)(_.a.mark((function e(){var a,n,i,l,s,u;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.o)(t);case 2:if(n=e.sent,i=null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.entity.rows,l=i.reduce((function(e,a){return Object(c.a)(Object(c.a)({},e),{},Object(r.a)({},t?a.categoryId:a.id,{name:a.name,rate:a.rate,categoryId:t?a.categoryId:a.id,id:a.id}))}),{}),!t){e.next=11;break}return e.next=8,Object(b.o)(null);case 8:u=e.sent,(null===u||void 0===u||null===(s=u.data)||void 0===s?void 0:s.entity.rows).forEach((function(e){l[e.id]||(l[e.id]={name:e.name,rate:e.rate,categoryId:e.id,id:e.id})}));case 11:f(l),o(l);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){"special"===a&&h()}),[t]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{children:[Object(j.jsx)(m,{level:4,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Rates"}),Object(j.jsx)(u.a,{style:{overflowY:"auto"},className:"border-b-2 mb-2",children:Object.values(p).map((function(e){return Object(j.jsx)(d.a,{label:e.name,type:"number",name:e.name,onChange:function(t){return function(e,t){var a=Object(c.a)(Object(c.a)({},p),{},Object(r.a)({},t.id,{name:t.name,rate:e.target.value,categoryId:t.categoryId,id:t.id}));f(a),o(a)}(t,e)},value:e.rate,lcol:2,icol:2},e.id)}))})]})})}},201:function(module,__webpack_exports__,__webpack_require__){"use strict";var _home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(22),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(11),_home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(120),antd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(103),antd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(40),_common_InputField__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(62),_api__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(25),sweetalert__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(36),sweetalert__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(sweetalert__WEBPACK_IMPORTED_MODULE_11__),_ant_design_icons__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(208),_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(209),_data_MilkData__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(116),_common_SelectField__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(97),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(4),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__),MilkFom=function MilkFom(_ref){var data=_ref.data,callback=_ref.callback,setEditData=_ref.setEditData,initialData=_data_MilkData__WEBPACK_IMPORTED_MODULE_14__.a.reduce((function(e,t){return Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},e),{},Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},t.name,t.defaultValue?t.defaultValue:""))}),{}),_useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(initialData),_useState2=Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),formData=_useState2[0],setFormData=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(!0),_useState4=Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),rateDisbaled=_useState4[0],setRateDiabled=_useState4[1],onChange=function(e){setFormData(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e.target.name,e.target.value)))},onSelectChange=function(e,t){"taxable"==e&&setRateDiabled("Yes"!=t),setFormData(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.a)({},formData),{},Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_2__.a)({},e,t)))};Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){setFormData(data)}),[data]);var onSubmit=function(){var e=Object(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.a)(_home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.mark((function e(t){var a,n,r,c;return _home_ankit_Ankit_milk_client_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_4___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(formData),!data){e.next=9;break}return e.next=4,Object(_api__WEBPACK_IMPORTED_MODULE_10__.w)(data.id,formData);case 4:n=e.sent,console.log(n),1==(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.status)?sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully updated milk details","success"):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error"),e.next=14;break;case 9:return e.next=11,Object(_api__WEBPACK_IMPORTED_MODULE_10__.g)(formData);case 11:c=e.sent,console.log(c),1==(null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.status)?sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("Succesfully added milk details","success"):sweetalert__WEBPACK_IMPORTED_MODULE_11___default()("OOPS Something Went wrong","error");case 14:return reset(),e.next=17,callback();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),reset=function(){setFormData(initialData),setEditData(null)},taxable=[{value:"Yes",name:"Yes"},{value:"No",name:"No"}],gstRate=[{value:0,name:"0 %"},{value:1,name:"1 %"},{value:1.5,name:"1.5 %"},{value:3,name:"3 %"},{value:5,name:"5 %"},{value:7.5,name:"7.5 %"},{value:12,name:"12 %"},{value:18,name:"18 %"}];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.Fragment,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)("div",{id:"form-div",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:_data_MilkData__WEBPACK_IMPORTED_MODULE_14__.a.map((function(field){return"input"==field.type?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_common_InputField__WEBPACK_IMPORTED_MODULE_9__.a,{label:field.label,type:field.inputType,name:field.name,onChange:onChange,value:formData?formData[field.name]:""},field.name):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_common_SelectField__WEBPACK_IMPORTED_MODULE_15__.a,{label:field.label,option:eval(field.list).map((function(e){return{value:e.value,text:e.name}})),showSearch:!0,optionFilterProp:"children",value:formData?formData[field.name]:field.defaultValue,showArrow:!1,onChange:function(e){return onSelectChange(field.name,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},disabled:"gstRate"==field.name&&rateDisbaled},field.name)}))}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_6__.a,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_7__.a,{span:24,className:"text-right",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{onClick:function(){return reset()},className:"mr-4",icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_12__.a,{}),children:"Reset"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(antd__WEBPACK_IMPORTED_MODULE_8__.a,{type:"primary",onClick:function(){return onSubmit()},icon:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_16__.jsx)(_ant_design_icons__WEBPACK_IMPORTED_MODULE_13__.a,{}),children:data?"Edit":"Add"})]})})]})})};__webpack_exports__.a=MilkFom},216:function(e,t,a){},25:function(e,t,a){"use strict";a.d(t,"m",(function(){return _})),a.d(t,"p",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"v",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"o",(function(){return b})),a.d(t,"g",(function(){return j})),a.d(t,"w",(function(){return m})),a.d(t,"l",(function(){return O})),a.d(t,"f",(function(){return p})),a.d(t,"n",(function(){return f})),a.d(t,"s",(function(){return h})),a.d(t,"r",(function(){return x})),a.d(t,"k",(function(){return v})),a.d(t,"q",(function(){return E})),a.d(t,"h",(function(){return D})),a.d(t,"i",(function(){return y})),a.d(t,"t",(function(){return g})),a.d(t,"u",(function(){return M})),a.d(t,"c",(function(){return k})),a.d(t,"a",(function(){return P})),a.d(t,"d",(function(){return w})),a.d(t,"b",(function(){return C}));var n=a(192),r=a.n(n),c="http://".concat(window.location.hostname,":8000"),i=r.a.create({baseURL:c}),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="".concat(e);t&&Object.keys(t).forEach((function(e){return n=n.replace(":".concat(e),t[e])}));var r={};if(a){Object.keys(a).forEach((function(e){void 0!==a[e]&&null!==a[e]&&(r[e]=a[e])}));var c=new URLSearchParams(r);n+="?".concat(c.toString())}return n},_=function(e,t,a){return i.get(o("/customers",{},{search:e,offset:t,limit:a}))},l=function(e,t,a){return i.get(o("/customers/dues",{},{search:e,offset:t,limit:a}))},s=function(e){return i.post("/customers",e)},u=function(e,t){return i.put("/customers/".concat(e),t)},d=function(e){return i.delete("/customers/".concat(e))},b=function(e,t,a,n){return i.get(o("/milk-category",{},{customerId:e,search:t,offset:a,limit:n}))},j=function(e){return i.post("/milk-category",e)},m=function(e,t){return i.put("/milk-category/".concat(e),t)},O=function(e){return i.delete("/milk-category/".concat(e))},p=function(e){return i.post("/invoices",e)},f=function(e,t,a,n){return i.get(o("/invoices",{},{type:e,search:t,offset:a,limit:n}))},h=function(e){return i.get("/invoices?date=".concat(e))},x=function(e){return i.get("/invoices/".concat(e))},v=function(e){return i.delete("/invoices/".concat(e))},E=function(e){return i.get("/customers/".concat(e,"/unpaid-invoices"))},D=function(e,t){return i.post("/customers/".concat(e,"/payments"),t)},y=function(e){return i.post("/stocks",{stocks:e})},g=function(e){return i.get("/stocks?date=".concat(e))},M=function(e){return i.get("/stocks-by-date?date=".concat(e))},k=function(e){return function(t,a,n,r){return i.get(o("/".concat(e),{},{search:t,offset:a,limit:n,filters:r}))}},P=function(e){return function(t){return i.post("/".concat(e),t)}},w=function(e){return function(t,a){return i.put("/".concat(e,"/").concat(t),a)}},C=function(e){return function(t){return i.delete("/".concat(e,"/").concat(t))}}},329:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(41),i=a.n(c),o=a(57),_=(a(166),a(5)),l=a(37),s=(a(167),a(216),a(332)),u=a(72),d=a(337),b=a(338),j=a(3),m=a(1),O=a(7),p=a(22),f=a(11),h=a.n(f),x=a(66),v=a.n(x),E=a(330),D=a(40),y=a(120),g=a(103),M=a(335),k=a(202),P=a(333),w=a(25),C=a(44),T=a.n(C),I=a(336),A=a(62),S=a(36),R=a.n(S),L=[{label:"Invoice No.",name:"invoiceNo",type:"input",inputType:"text"},{label:"Date",name:"invoiceDate",type:"input",inputType:"text"},{label:"Customer",name:"customerName",type:"input",inputType:"text"},{label:"Total Amount",name:"total",type:"select",inputType:"text",list:"customerType"},{label:"Status",name:"paymentStatus",type:"input",inputType:"text"},{label:"Amount Paid",name:"amountPaid",type:"input",inputType:"text"},{label:"Date Of Payment",name:"paymentDate",type:"input",inputType:"text"}],W=[{label:"Customer",name:"customerId",type:"input",inputType:"text"},{label:"Payemnt Date",name:"createdAt",type:"input",inputType:"date"},{label:"Amout Received",name:"amountReceived",type:"input",inputType:"text"}];function K(e){R()({text:e,icon:"error",buttons:{cancel:{text:"Cancel",value:null,visible:!1,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-primary",closeModal:!0}}})}function B(e){R()({text:e,icon:"info",buttons:{cancel:{text:"Cancel",value:null,visible:!1,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-info",closeModal:!0}}})}function U(e,t,a){R()({text:e,icon:"warning",buttons:{cancel:{text:"Cancel",value:null,visible:!0,className:"btn-sm btn-default",closeModal:!0},confirm:{text:"OK",value:!0,visible:!0,className:"btn-sm btn-danger",closeModal:!0}}}).then((function(e){e?t():a()}))}function N(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}var q=function(e){return function(e,t,a,n,r){return Object(w.c)(e)(t,a,n,r)}},F=function(e){return Object(w.b)(e)},Y=function(e,t){return Object(m.a)({},t)},z=function(e,t){return"purchase"!=t&&"payments"!=t||"customerName"!=e.name&&"customerCode"!=e.name?"payments"!=t||"receiptDate"!=e.name&&"via"!=e.name?"vendor"!=t||"name"!=e.name&&"code"!=e.name?e.label:e.label.replace("Customer","Vendor"):e.label.replace("Receipt","Payment"):e.label.replace("Customer","Vendor")},Q=function(e){return"payment-receipts"===e?"Payments History":e.charAt(0).toUpperCase()+e.slice(1)},V=a(4),G=E.a.Title,H=function(e){var t=e.visible,a=e.setVisible,r=e.customer,c=e.callback,i={amountReceived:0,additionalDue:0},o=Object(n.useState)(i),l=Object(_.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)([]),b=Object(_.a)(d,2),O=b[0],f=b[1],x=function(e){u(Object(m.a)(Object(m.a)({},s),{},Object(j.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.q)(null===t||void 0===t?void 0:t.id);case 2:n=e.sent,console.log(n),f(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.entity.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{invoiceDate:e.invoiceDate?T()(e.invoiceDate).format("DD-MM-YYYY"):null,paymentDate:e.paymentDate?T()(e.paymentDate).format("DD-MM-YYYY"):null})})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){r&&t&&v(r)}),[r,t]);var M=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s),e.next=3,Object(w.h)(r.id,s);case 3:return o=e.sent,console.log(o),1==(null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.status)?R()("Succesfully Payment done","success"):R()("OOPS Something Went wrong","error"),t&&a(!1),e.next=9,c();case 9:u(i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){U("Are you sure you want to close without adding amount received ?",(function(){a(!1)}),(function(){}))},C=L.map((function(e){return{title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px"}})).filter((function(e){return"customerName"!==e.dataIndex}));O.reduce((function(e,t){return t.total+e}),0);return Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(I.a,{title:"Payment",visible:t,width:"50%",style:{top:75},keyboard:!1,onCancel:function(){return k()},footer:[Object(V.jsx)(D.a,{onClick:function(){return k()},children:"Cancel"},"cancel"),Object(V.jsx)(D.a,{type:"primary",onClick:function(){return M(!0)},children:"Save"},"savclose")],children:Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsxs)(G,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:[null===r||void 0===r?void 0:r.name,"'s Due Invoices"]}),Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:O,columns:C,bordered:!0,pagination:{},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})}),Object(V.jsxs)(y.a,{className:"w-full",children:[(null===r||void 0===r?void 0:r.previousDue)>0?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(G,{level:4,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},children:"Previous Due : ".concat(null!==r&&void 0!==r&&r.previousDue?Math.round(null===r||void 0===r?void 0:r.previousDue):0)})}),Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(G,{level:4,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},children:"Due : ".concat((null===r||void 0===r?void 0:r.due)>=0?Math.round((null===r||void 0===r?void 0:r.due)-(null===r||void 0===r?void 0:r.previousDue)):0)})})]}):null,Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(G,{level:4,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},children:(null===r||void 0===r?void 0:r.due)>=0?"Total Due : ".concat(null===r||void 0===r?void 0:r.due):"Total Advance : ".concat(-(null===r||void 0===r?void 0:r.due))})}),Object(V.jsx)(A.a,{label:"Amount Received",type:"number",name:"amountReceived",onChange:x,value:s.amountReceived,lcol:8,icol:16},"amountReceived"),Object(V.jsx)(A.a,{label:"Previous Due",type:"number",name:"additionalDue",onChange:x,value:s.additionalDue,lcol:8,icol:16},"additionalDue")]})]})})})},J=a(207),X=E.a.Title,Z=function(){var e,t=Object(n.useState)(T()().format("YYYY-MM-DD")),a=Object(_.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)([]),o=Object(_.a)(i,2),l=o[0],s=o[1],u=Object(n.useState)([]),d=Object(_.a)(u,2),b=d[0],f=d[1],x=Object(n.useState)([]),C=Object(_.a)(x,2),I=C[0],A=C[1],S=Object(n.useState)(!1),R=Object(_.a)(S,2),L=R[0],W=R[1],K=Object(n.useState)(null),B=Object(_.a)(K,2),U=B[0],q=B[1],F=Object(n.useState)([]),Y=Object(_.a)(F,2),z=Y[0],Q=Y[1],G=Object(n.useState)(1),Z=Object(_.a)(G,2),$=Z[0],ee=Z[1],te=Object(n.useState)(20),ae=Object(_.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(0),ie=Object(_.a)(ce,2),oe=ie[0],_e=ie[1],le=Object(n.useState)(""),se=Object(_.a)(le,2),ue=se[0],de=se[1],be=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.s)(t);case 2:n=e.sent,console.log(n),s(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.entity);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.o)();case 2:a=e.sent,f(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.entity.rows);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.p)(ue,($-1)*ne,ne);case 2:r=e.sent,console.log(r),A(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.entity.rows),_e(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.entity.count);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.u)(t);case 2:n=e.sent,console.log(n),Q(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.entity);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)(Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je();case 2:return t.next=4,be(r);case 4:return t.next=6,Oe(r);case 6:e&&clearTimeout(e),e=setTimeout((function(){var e=document.querySelector("#total-table > div > div > div > div > div > div > div"),t=document.querySelector("#report-table > div > div > div > div > div > div > div.ant-table-body");e.addEventListener("scroll",(function(){var a=e.scrollLeft;t.scrollLeft=a}))}),1e3);case 8:case"end":return t.stop()}}),t)}))),[r]),Object(n.useEffect)((function(){me()}),[$,ne,ue]);for(var pe=b.length>0?[{title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:"Customers",children:"Customers"}),dataIndex:"customer",key:"customer",width:"150px",fixed:"left"}].concat(Object(O.a)(b.map((function(e){return{title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:e.name,children:e.name}),dataIndex:e.id,key:e.id,width:"150px"}})))):[],fe=z.reduce((function(e,t){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},t.categoryId,t.carryForward+t.morningQuantity+t.eveningQuantity))}),{}),he={},xe=0;xe<b.length;xe++)he[b[xe].id]=0;for(var ve=l.map((function(e){for(var t={customer:e.name},a=0;a<b.length;a++)t[b[a].id]=0;for(var n=e.invoices,r=0;r<n.length;r++)for(var c=n[r].milkCategory,i=0;i<c.length;i++){var o=c[i].categoryId||c[i].id;void 0==t[o]&&(t[o]=0),t[o]+=c[i].Transaction.quantity,he[o]+=c[i].Transaction.quantity}return t})),Ee=[Object(m.a)({id:N(),customer:"Total Stock"},fe),Object(m.a)({id:N(),customer:"Total Sold"},he),Object(m.a)({id:N(),customer:"Total Remaining"},Object.keys(fe).reduce((function(e,t){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},t,fe[t]-he[t]))}),{}))],De=[{title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:"Customers",children:"Customers"}),dataIndex:"name",key:"customer",width:"40%"},{title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:"Dues",children:"Due / Advance"}),key:"dues",width:"40%",render:function(e){return 0==e.due||null==e.due?Object(V.jsxs)("div",{children:[" ",e.due," "]},"due"+e.id):e.due>0?Object(V.jsxs)("div",{className:"text-red-800",children:[e.due," (Due)"]},"due"+e.id):Object(V.jsxs)("div",{className:"text-green-800",children:[-e.due," (Advance)"]},"due"+e.id)}},{title:"Payments",key:"operation",width:"10%",render:function(e){return Object(V.jsx)("div",{className:"float-right",children:Object(V.jsxs)(D.a,{type:"primary",onClick:function(){return ye(e)},title:"Edit",children:[Object(V.jsx)(J.a,{})," Pay"]},"edit"+e.id)})}}],ye=function(e){q(e),W(!0)},ge=[10,20,50,100],Me=[];ge.length>0&&ge[0]<oe;)Me.push(ge[0]+""),ge.shift();return oe>10&&Me.push(oe+""),Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("div",{style:{height:"calc(100vh - 150px)",overflowY:"auto",overflowX:"hidden"},children:[Object(V.jsx)(X,{level:2,className:"heading",id:"mainheader",children:"Today's Report"}),Object(V.jsxs)(y.a,{gutter:[32,32],children:[Object(V.jsx)(g.a,{span:4,children:Object(V.jsx)(M.a,{title:"Total Collection",value:v()(0)})}),Object(V.jsx)(g.a,{span:4,children:Object(V.jsx)(M.a,{title:"Total Stocks",value:v()(0)})}),Object(V.jsx)(g.a,{span:4,children:Object(V.jsx)(M.a,{title:"Total Stocks Left",value:v()(0)})}),Object(V.jsx)(g.a,{span:4,children:Object(V.jsx)(M.a,{title:"Total Invoices Generated",value:v()(0)})}),Object(V.jsx)(g.a,{span:4,children:Object(V.jsx)(M.a,{title:"Total New Customers Added",value:v()(0)})})]}),Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsxs)("div",{style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"flex border-b-2",children:[Object(V.jsx)(X,{level:3,children:"Sales Report "}),Object(V.jsx)("div",{className:"",children:Object(V.jsx)(y.a,{children:Object(V.jsx)(k.a,{type:"date",name:"reportDate",onChange:function(e){c(e.target.value)},value:r,className:"ml-2"},"invoiceDate")})})]}),Object(V.jsx)(y.a,{className:"w-full overflow-y-auto ",id:"report-table",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:ve,columns:pe,bordered:!0,scroll:{x:1600,y:384},pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})}),Object(V.jsx)(y.a,{className:"w-full overflow-y-auto ",id:"total-table",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:Ee,columns:pe,bordered:!0,scroll:{x:1600},pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())},showHeader:!1})})})]}),Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsx)("div",{style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:Object(V.jsx)(X,{level:3,children:"All Customers"})}),Object(V.jsx)("div",{className:"mb-2",children:Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:12,children:Object(V.jsx)(k.a,{placeholder:"Search...",value:ue,onChange:function(e){return de(e.target.value)}})})})}),Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:I,columns:De,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:Me,current:$,pageSize:ne,onChange:function(e){ee(e)},onShowSizeChange:function(e,t){re(t),ee(1)},total:oe,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})}),Object(V.jsx)(H,{visible:L,setVisible:W,customer:U,callback:me})]})]})})},$=a(339),ee=a(340),te=a(341),ae=a(342),ne=a(343),re=a(344),ce=a(345),ie=(a.p,function(){var e=Object(n.useState)(!0),t=Object(_.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(void 0),i=Object(_.a)(c,2),l=i[0],s=i[1];return Object(n.useEffect)((function(){var e=function(){return s(window.innerWidth)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){r(!(l<=800))}),[l]),Object(V.jsxs)("div",{className:"nav-container  h-screen",children:[Object(V.jsxs)("div",{className:"logo-container",children:[Object(V.jsx)(E.a.Title,{level:2,className:"logo",children:Object(V.jsx)(o.b,{to:"/",children:"AMMS"})}),Object(V.jsx)(D.a,{className:"menu-control-container",onClick:function(){return r(!a)},children:Object(V.jsx)($.a,{})})]}),a&&Object(V.jsxs)(u.a,{theme:"dark",children:[Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(ee.a,{}),children:Object(V.jsx)(o.b,{to:"/",children:"Home"})}),Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(te.a,{}),children:Object(V.jsx)(o.b,{to:"/customers",children:"Customers"})}),Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(ae.a,{}),children:Object(V.jsx)(o.b,{to:"/invoices",children:"Invoices"})}),Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(ne.a,{}),children:Object(V.jsx)(o.b,{to:"/milk-category",children:"Milk Rates"})}),Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(re.a,{}),children:Object(V.jsx)(o.b,{to:"/stocks",children:"Stocks"})}),Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(ce.a,{}),children:Object(V.jsx)(o.b,{to:"/payments",children:"Payments History"})}),Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(ce.a,{}),children:Object(V.jsx)(o.b,{to:"/purchases",children:"Purchase"})})]})]})}),oe=a(161),_e=a(115),le=a(346),se=E.a.Title,ue=function(){var e=Object(n.useState)(null),t=Object(_.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),i=Object(_.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(1),u=Object(_.a)(s,2),d=u[0],b=u[1],j=Object(n.useState)(20),O=Object(_.a)(j,2),f=O[0],x=O[1],v=Object(n.useState)(0),M=Object(_.a)(v,2),C=M[0],T=M[1],I=Object(n.useState)(""),A=Object(_.a)(I,2),S=A[0],R=A[1],L=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.m)(S,(d-1)*f,f);case 2:n=e.sent,r(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.entity.rows),T(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.entity.count);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){L()}),[d,f,S]);var W=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ?")){e.next=7;break}return e.next=4,Object(w.j)(t.id);case 4:null!==(n=e.sent)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.status?B("Succesfully Deleted"):K("OOPS!! Something went wrong"),L();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=_e.a.map((function(e){return{title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px"}}));U.push({title:"Action",key:"operation",width:10,render:function(e){return Object(V.jsxs)("div",{className:"float-right",children:[Object(V.jsx)(D.a,{type:"primary",onClick:function(){return function(e){l(Object(m.a)({},e)),setTimeout((function(){return document.getElementById("form-div").scrollIntoView()}),2)}(e)},title:"Edit",children:Object(V.jsx)(J.a,{})},"edit"+e.id),Object(V.jsx)(D.a,{type:"secondary",onClick:function(){return W(e)},className:"ml-2",title:"Delete",children:Object(V.jsx)(le.a,{})},"delete"+e.id)]})}});for(var N=[10,20,50,100],q=[];N.length>0&&N[0]<C;)q.push(N[0]+""),N.shift();return C>10&&q.push(C+""),Object(V.jsxs)("div",{style:{height:"calc(100vh - 150px)",overflowY:"auto"},children:[Object(V.jsxs)("div",{className:"site-layout-background p-5",children:[Object(V.jsxs)(se,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:[o?"Edit":"Add"," Customer ",o?"(".concat(o.name,")"):""]}),Object(V.jsx)(oe.a,{data:o,callback:L,setEditData:l})]}),Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsx)(se,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Customers"}),Object(V.jsx)("div",{className:"mb-2",children:Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:12,children:Object(V.jsx)(k.a,{placeholder:"Search...",value:S,onChange:function(e){return R(e.target.value)}})})})}),Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:a,columns:U,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:q,current:d,pageSize:f,onChange:function(e){b(e)},onShowSizeChange:function(e,t){x(t),b(1)},total:C,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},de=a(116),be=a(201),je=E.a.Title,me=function(){var e=Object(n.useState)(null),t=Object(_.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),i=Object(_.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(1),u=Object(_.a)(s,2),d=u[0],b=u[1],j=Object(n.useState)(20),O=Object(_.a)(j,2),f=O[0],x=O[1],v=Object(n.useState)(0),M=Object(_.a)(v,2),C=M[0],T=M[1],I=Object(n.useState)(""),A=Object(_.a)(I,2),S=A[0],R=A[1],L=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.o)(null,S,(d-1)*f,f);case 2:n=e.sent,r(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.entity.rows),T(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.entity.count);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){L()}),[d,f,S]);var W=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ?")){e.next=7;break}return e.next=4,Object(w.l)(t.id);case 4:null!==(n=e.sent)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.status?B("Succesfully Deleted"):K("OOPS!! Something went wrong"),L();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=de.a.map((function(e){return{title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px"}}));U.push({title:"Action",key:"operation",width:10,render:function(e){return Object(V.jsxs)("div",{className:"float-right",children:[Object(V.jsx)(D.a,{type:"primary",onClick:function(){return function(e){l(Object(m.a)({},e)),setTimeout((function(){return document.getElementById("form-div").scrollIntoView()}),2)}(e)},title:"Edit",children:Object(V.jsx)(J.a,{})},"edit"+e.id),Object(V.jsx)(D.a,{type:"secondary",onClick:function(){return W(e)},className:"ml-2",title:"Delete",children:Object(V.jsx)(le.a,{})},"delete"+e.id)]})}});for(var N=[10,20,50,100],q=[];N.length>0&&N[0]<C;)q.push(N[0]+""),N.shift();return C>10&&q.push(C+""),Object(V.jsxs)("div",{style:{height:"calc(100vh - 150px)",overflowY:"auto"},children:[Object(V.jsxs)("div",{className:"site-layout-background p-5",children:[Object(V.jsxs)(je,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:[o?"Edit":"Add"," Milk Category ",o?"(".concat(o.name,")"):""]}),Object(V.jsx)(be.a,{data:o,callback:L,setEditData:l})]}),Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsx)(je,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"Milk Categories"}),Object(V.jsx)("div",{className:"mb-2",children:Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:12,children:Object(V.jsx)(k.a,{placeholder:"Search...",value:S,onChange:function(e){return R(e.target.value)}})})})}),Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:a,columns:U,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:q,current:d,pageSize:f,onChange:function(e){b(e)},onShowSizeChange:function(e,t){x(t),b(1)},total:C,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})]})},Oe=a(348),pe=a(349),fe=a(350),he=a(97),xe=a(208),ve=a(209),Ee=a(10),De=a(334),ye=a(87),ge=a(331),Me=["index"],ke=["title","editable","children","dataIndex","record","handleSave","customerData","milk"],Pe=r.a.createContext(null),we=function(e){e.index;var t=Object(Ee.a)(e,Me),a=De.a.useForm(),n=Object(_.a)(a,1)[0];return Object(V.jsx)(De.a,{form:n,component:!1,children:Object(V.jsx)(Pe.Provider,{value:n,children:Object(V.jsx)("tr",Object(m.a)({},t))})})},Ce=function(e){var t=e.title,a=e.editable,r=e.children,c=e.dataIndex,i=e.record,o=e.handleSave,l=e.customerData,s=e.milk,u=Object(Ee.a)(e,ke),d=Object(n.useState)(!1),b=Object(_.a)(d,2),j=b[0],O=(b[1],Object(n.useRef)(null));Object(n.useContext)(Pe);Object(n.useEffect)((function(){j&&O.current.focus()}),[j]);var p=function(e,t){var a={};if("categoryName"===c){var n="special"==l.type?s[t].normal.gstRate:s[t].gstRate;a={categoryName:s[t].name,categoryId:t,rate:s[t].rate,gstRate:n},void 0!=i.quantity&&(a.total=Math.round(parseFloat(a.rate)*parseFloat(i.quantity)*10)/10,a.totalWithTax=Math.round(10*(a.total+a.total*a.gstRate/100))/10)}"quantity"==c&&void 0!=i.rate&&((a={quantity:t}).total=Math.round(parseFloat(i.rate)*parseFloat(t)*10)/10,a.totalWithTax=Math.round(10*(a.total+a.total*i.gstRate/100))/10),o(Object(m.a)(Object(m.a)({},i),a))},f=r;return a&&(f="Total Amount"!=i.categoryName?Object(V.jsx)(De.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}],children:"categoryName"!==c?Object(V.jsx)(k.a,{onChange:function(e){return p(0,e.target.value)}}):Object(V.jsx)(ye.a,{label:"Customer",editable:!0,showSearch:!0,optionFilterProp:"children",showArrow:!1,onChange:function(e){return p(0,e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())},children:Object.values(s).map((function(e,t){return Object(V.jsx)(Option,{value:e.id,children:e.name},t)}))},"customerId")}):Object(V.jsx)("div",{className:"editable-cell-value-wrap font-bold",style:{paddingRight:24,fontSize:"16px"},children:r})),Object(V.jsx)("td",Object(m.a)(Object(m.a)({},u),{},{children:f}))},Te=function(e){var t=e.setTransactions,a=e.customerData,r=e.transactions,c=e.milk,i=e.notEditable,o=Object(n.useState)([]),l=Object(_.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(0),b=Object(_.a)(d,2),j=b[0],p=b[1];Object(n.useEffect)((function(){u(r)}),[r]);var f=[{title:"Item Name",dataIndex:"categoryName",width:"35%",editable:!i},{title:"Rate",dataIndex:"rate",width:"10%"},{title:"Quantity",dataIndex:"quantity",width:"10%",editable:!i},{title:"Total",dataIndex:"total",width:"10%"},{title:"GST Rate (%)",dataIndex:"gstRate",width:"10%"},{title:"Total( inc. tax)",dataIndex:"totalWithTax",width:"10%"}];i||f.push({title:"Action",dataIndex:"operation",width:"5%",render:function(e,t){return"Total Amount"!==t.categoryName&&s.length>=1?Object(V.jsx)(ge.a,{title:"Sure to delete?",onConfirm:function(){return function(e){var t=s.filter((function(t){return t.key!==e}));u(t)}(t.key)},children:Object(V.jsx)("a",{children:"Delete"})}):null}});var h=function(e){var a=Object(O.a)(s),n=a.findIndex((function(t){return e.key===t.key})),r=a[n];a.splice(n,1,Object(m.a)(Object(m.a)({},r),e)),u(a),t(a)},x={body:{row:we,cell:Ce}},v=f.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{onCell:function(t,n){var r={};return"Total Amount"==t.categoryName&&"categoryName"==e.dataIndex&&(r={colSpan:5}),"Total Amount"!=t.categoryName||"quantity"!=e.dataIndex&&"rate"!=e.dataIndex&&"gstRate"!=e.dataIndex&&"total"!=e.dataIndex||(r={colSpan:0}),e.editable?Object(m.a)({record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:h,customerData:a,milk:c},r):r}})})),E={key:j+2,categoryName:"Total Amount",totalWithTax:Math.round(s.reduce((function(e,t){return e+t.totalWithTax}),0))};return Object(V.jsxs)("div",{children:[i?null:Object(V.jsx)(D.a,{onClick:function(){var e={key:j,categoryName:"Select Item",rate:"0",quantity:"0",total:0,gstRate:0,totalWithTax:0};u([].concat(Object(O.a)(s),[e])),p(j+1)},type:"primary",style:{marginBottom:16},children:"Add a item"}),Object(V.jsx)(P.a,{components:x,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:[].concat(Object(O.a)(s),[E]),columns:v,pagination:!1})]})},Ie=function(e){e.data;var t=e.type,a=e.customers,r=e.callback,c=(e.setEditData,{invoiceNo:"",customerId:"",total:"",transactions:[],invoiceDate:T()().format("YYYY-MM-DD")}),i=Object(n.useState)(c),o=Object(_.a)(i,2),l=o[0],s=o[1],u=a?a.reduce((function(e,t){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},t.id,t))}),{}):{},d=Object(n.useState)({}),b=Object(_.a)(d,2),f=b[0],x=b[1],v=Object(n.useState)([]),E=Object(_.a)(v,2),M=E[0],k=E[1],P=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l&&l.customerId&&u[l.customerId],e.next=3,Object(w.o)(n&&"special"==n.type?n.id:void 0);case 3:r=e.sent,c=null===r||void 0===r||null===(t=r.data)||void 0===t||null===(a=t.entity)||void 0===a?void 0:a.rows.reduce((function(e,t){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},t.id,t))}),{}),x(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:case"end":return e.stop()}}),e)}))),[l]);var C=function(){var e=Object(p.a)(h.a.mark((function e(a){var n,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(l),l.transactions&&0!=(null===(n=l.transactions)||void 0===n?void 0:n.length)){e.next=4;break}return K("Please insert atleast one item"),e.abrupt("return");case 4:if(""!=l.customerId){e.next=7;break}return K("Please select customer"),e.abrupt("return");case 7:if(l.transactions=l.transactions.filter((function(e){return e.categoryId})),0!=l.transactions.length){e.next=11;break}return K("No Items selected"),e.abrupt("return");case 11:return l.total=Math.round(l.transactions.reduce((function(e,t){return e+t.totalWithTax}),0)),l.existingUser=!!u[l.customerId],l.type=t,e.next=16,Object(w.f)(l);case 16:if(i=e.sent,console.log(i),1!=(null===i||void 0===i||null===(c=i.data)||void 0===c?void 0:c.status)){e.next=25;break}return R()("Succesfully generated invoice details","success"),I(),e.next=23,r(l.customerId,i.data.entity.customer);case 23:e.next=26;break;case 25:R()("OOPS Something Went wrong","error");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){s(c)};return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("div",{id:"form-div",children:[Object(V.jsxs)(y.a,{children:[Object(V.jsx)(he.a,{label:"Customer",option:a?[].concat(Object(O.a)(a.map((function(e){return{value:e.id,text:e.name}}))),Object(O.a)(M)):Object(O.a)(M),showSearch:!0,optionFilterProp:"children",value:l?l.customerId:"",showArrow:!1,onSearch:function(e){return function(e){e&&k([{value:e,text:e}])}(e)},onChange:function(e){return function(e,t){console.log("cust",t),s(Object(m.a)(Object(m.a)({},l),{},Object(j.a)({},e,t)))}("customerId",e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())}},"customerId"),Object(V.jsx)(A.a,{label:"Dated",type:"date",name:"invoiceDate",onChange:function(e){s(Object(m.a)(Object(m.a)({},l),{},Object(j.a)({},e.target.name,e.target.value)))},value:l?l.invoiceDate:""},"invoiceDate")]}),Object(V.jsx)(y.a,{children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(Te,{setTransactions:function(e){s(Object(m.a)(Object(m.a)({},l),{},{transactions:e}))},customerData:l&&l.customerId&&(u[l.customerId]||{type:"normal"}),transactions:l&&l.transactions,milk:f})})}),Object(V.jsx)(y.a,{children:Object(V.jsxs)(g.a,{span:24,className:"text-right",children:[Object(V.jsx)(D.a,{onClick:function(){return I()},className:"mr-4",icon:Object(V.jsx)(xe.a,{}),children:"Reset"}),Object(V.jsxs)(D.a,{type:"primary",onClick:function(){return C()},icon:Object(V.jsx)(ve.a,{}),children:["Generate ","sale"==t?"Invoice":"Purchase"]})]})})]})})},Ae=E.a.Title,Se=function(e){var t,a=e.visible,r=e.setVisible,c=e.invoiceId,i=Object(n.useState)({transactions:[]}),o=Object(_.a)(i,2),l=o[0],s=o[1],u=Object(n.useState)({}),d=Object(_.a)(u,2),b=(d[0],d[1],function(){var e=Object(p.a)(h.a.mark((function e(t){var a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.r)(t);case 2:r=e.sent,console.log(r),c=null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.entity.milkCategory.map((function(e){var t=e.Transaction.rate*e.Transaction.quantity;return{categoryName:e.name,rate:e.Transaction.rate,quantity:e.Transaction.quantity,total:e.Transaction.rate*e.Transaction.quantity,gstRate:e.gstRate,totalWithTax:Math.round(10*(t+t*e.gstRate/100))/10}})),s(Object(m.a)(Object(m.a)({},null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.entity),{},{transactions:c}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(n.useEffect)(Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("calling",c),!c){e.next=4;break}return e.next=4,b(c);case 4:case"end":return e.stop()}}),e)}))),[c]),Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(I.a,{title:"Invoice Details",visible:a,width:"50%",style:{top:75},keyboard:!1,onCancel:function(){return r(!1)},footer:[],children:Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsxs)(y.a,{children:[Object(V.jsx)(g.a,{span:12,children:Object(V.jsxs)(Ae,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Customer Name : ",null===l||void 0===l||null===(t=l.customer)||void 0===t?void 0:t.name]})}),Object(V.jsx)(g.a,{span:12,children:Object(V.jsxs)(Ae,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Dated : ",T()(null===l||void 0===l?void 0:l.invoiceDate).format("DD-MM-YYYY")]})})]}),Object(V.jsx)(y.a,{children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(Te,{customerData:l&&l.customerId&&(null===l||void 0===l?void 0:l.customer),transactions:l&&(null===l||void 0===l?void 0:l.transactions),milk:{},notEditable:!0})})})]})})})},Re=E.a.Title,Le=function(e){var t=e.type,a=Object(n.useState)(null),r=Object(_.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(null),l=Object(_.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),b=Object(_.a)(d,2),j=b[0],O=b[1],f=Object(n.useState)(null),x=Object(_.a)(f,2),v=x[0],M=x[1],C=Object(n.useState)(!1),I=Object(_.a)(C,2),A=I[0],S=I[1],R=Object(n.useState)(null),W=Object(_.a)(R,2),U=W[0],N=W[1],q=Object(n.useState)(1),F=Object(_.a)(q,2),Y=F[0],z=F[1],Q=Object(n.useState)(20),G=Object(_.a)(Q,2),J=G[0],X=G[1],Z=Object(n.useState)(0),$=Object(_.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(""),ne=Object(_.a)(ae,2),re=ne[0],ce=ne[1],ie=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.m)();case 2:a=e.sent,i(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.entity.rows);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(p.a)(h.a.mark((function e(){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.n)(t,re,(Y-1)*J,J);case 2:r=e.sent,u(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.entity.rows.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{customerName:e.customer.name,invoiceDate:e.invoiceDate?T()(e.invoiceDate).format("DD-MM-YYYY"):null,paymentDate:e.paymentDate?T()(e.paymentDate).format("DD-MM-YYYY"):null})}))),te(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.entity.count);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){ie()}),[]),Object(n.useEffect)((function(){oe()}),[Y,J,re,t]);var _e=function(e){return"invoiceNo"==e.name?{render:function(e,t){return console.log("data",t),Object(V.jsx)("div",{children:Object(V.jsx)("a",{onClick:function(){return e=t.id,N(e),void S(!0);var e},className:"underline text-blue-900",children:e})})}}:{}},se=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete ?")){e.next=7;break}return e.next=4,Object(w.k)(t.id);case 4:null!==(n=e.sent)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.status?B("Succesfully Deleted"):K("OOPS!! Something went wrong"),oe();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=L.map((function(e){return Object(m.a)({title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"150px"},_e(e))}));ue.push({title:"Action",key:"operation",width:10,render:function(e){return Object(V.jsx)("div",{className:"float-right",children:Object(V.jsx)(D.a,{type:"secondary",onClick:function(){return se(e)},className:"ml-2",title:"Delete",children:Object(V.jsx)(le.a,{})},"delete"+e.id)})}});for(var de=[10,20,50,100],be=[];de.length>0&&de[0]<ee;)be.push(de[0]+""),de.shift();return ee>10&&be.push(ee+""),Object(V.jsxs)("div",{style:{height:"calc(100vh - 150px)",overflowY:"auto"},children:[Object(V.jsxs)("div",{className:"site-layout-background p-5",children:[Object(V.jsxs)(Re,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:["Generate ","sale"==t?"Invoice":"Purchase"," "]}),Object(V.jsx)(Ie,{customers:c,type:t,callback:function(){var e=Object(p.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:M(a),O(!0);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})]}),Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsx)(Re,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:"sale"==t?"Invoices":"Purchases"}),Object(V.jsx)("div",{className:"mb-2",children:Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:12,children:Object(V.jsx)(k.a,{placeholder:"Search...",value:re,onChange:function(e){return ce(e.target.value)}})})})}),Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:s,columns:ue,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:be,current:Y,pageSize:J,onChange:function(e){z(e)},onShowSizeChange:function(e,t){X(t),z(1)},total:ee,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})}),Object(V.jsx)(H,{visible:j,setVisible:O,customer:v,callback:oe}),Object(V.jsx)(Se,{visible:A,setVisible:S,invoiceId:U})]})]})},We=a(347),Ke=E.a.Title,Be=function(){var e=Object(n.useState)([]),t=Object(_.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(T()().format("YYYY-MM-DD")),i=Object(_.a)(c,2),o=i[0],l=i[1],s=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(o,"reportDate"),e.next=3,Object(w.t)(o);case 3:a=e.sent,console.log(a),r(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.entity.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{name:e.milkCategory.name,total:parseFloat(e.carryForward)+parseFloat(e.eveningQuantity)+parseFloat(e.morningQuantity)})})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){s()}),[o]);var u=function(e){return"morningQuantity"==e||"eveningQuantity"==e?{render:function(t,a){return Object(V.jsx)(k.a,{onChange:function(t){return function(e,t,a){var n=parseFloat(a.carryForward||0)+parseFloat(t)+parseFloat("morningQuantity"==e?a.eveningQuantity:a.morningQuantity);document.getElementById("total_".concat(a.id)).innerHTML=n}(e,t.target.value,a)},defaultValue:t,type:"number",id:"".concat(e,"_").concat(a.id)},N())}}:"total"==e?{render:function(e,t){return Object(V.jsx)("div",{className:"font-bold",id:"total_".concat(t.id),children:e})}}:{}},d=[{label:"Item Name",name:"name"},{label:"Carry Forward",name:"carryForward"},{label:"Morning Quantity",name:"morningQuantity"},{label:"Evening Quantity",name:"eveningQuantity"},{label:"Total",name:"total"}].map((function(e){return Object(m.a)({title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:e.label,children:e.label}),dataIndex:e.name,key:e.name,width:"100px",align:e.align?e.align:"left"},u(e.name))})),b=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.map((function(e){return{id:e.id,categoryId:e.categoryId,carryForward:e.carryForward,morningQuantity:document.getElementById("morningQuantity_".concat(e.id)).value,eveningQuantity:document.getElementById("eveningQuantity_".concat(e.id)).value}})),console.log(n),e.next=4,Object(w.i)(n);case 4:r=e.sent,console.log(r),1==(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.status)?B("Succesfully Saved Stock Details"):K("OOPS Something Went wrong");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsxs)(y.a,{children:[Object(V.jsx)(g.a,{span:12,children:Object(V.jsxs)("div",{style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"flex border-b-2",children:[Object(V.jsx)(Ke,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:o===T()().format("YYYY-MM-DD")?"Today's Stocks":"Stocks"}),Object(V.jsx)("div",{className:"",children:Object(V.jsx)(y.a,{children:Object(V.jsx)(k.a,{type:"date",name:"reportDate",onChange:function(e){l(e.target.value)},value:o,className:"ml-2"},"invoiceDate")})})]})}),Object(V.jsx)(g.a,{span:12,children:o===T()().format("YYYY-MM-DD")&&Object(V.jsx)(D.a,{type:"primary",className:"float-right",icon:Object(V.jsx)(We.a,{}),onClick:b,children:" Save "})})]}),Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:a,columns:d,bordered:!0,scroll:{y:"calc(100vh - 300px)"},pagination:!1,rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})})},Ue=E.a.Title,Ne=function(e){e.page;var t=e.setFilter,a=e.filter,r=Object(n.useState)(null),c=Object(_.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)(null),s=Object(_.a)(l,2),u=s[0],d=s[1];Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q()("customers");case 2:a=e.sent,o(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.entity.rows);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return Object(V.jsx)(ye.a,{showSearch:!0,className:"w-full",placeholder:"Select a customer",optionFilterProp:"children",onChange:function(e){d(e),t(Object(m.a)(Object(m.a)({},a),{},{customerId:e}))},value:u,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:null===i||void 0===i?void 0:i.map((function(e){return Object(V.jsx)(ye.a.Option,{value:e.id,children:e.name},e.id)}))})},qe=function(e){var t=e.page,a=e.reload,r=e.setEditData,c=e.setReload,i=e.noaction,o=Object(n.useState)(null),l=Object(_.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)(!1),b=Object(_.a)(d,2),j=(b[0],b[1]),O=Object(n.useState)(null),f=Object(_.a)(O,2),x=(f[0],f[1]),v=Object(n.useState)(1),M=Object(_.a)(v,2),w=M[0],C=M[1],I=Object(n.useState)(20),A=Object(_.a)(I,2),S=A[0],R=A[1],L=Object(n.useState)(0),N=Object(_.a)(L,2),G=N[0],H=N[1],X=Object(n.useState)(""),Z=Object(_.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)({}),ae=Object(_.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(!1),ie=Object(_.a)(ce,2),oe=(ie[0],ie[1],function(){var e=Object(p.a)(h.a.mark((function e(){var a,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q(),e.next=3,r(t,$,(w-1)*S,S,JSON.stringify(ne));case 3:c=e.sent,console.log("response",c),u(null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.entity.rows.map((function(e){return Y(0,e)}))),H(null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.entity.count);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(n.useEffect)((function(){oe()}),[t,w,S,a,$,ne]);var _e=function(){var e=Object(p.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U("Are you sure you want to delete ?",Object(p.a)(h.a.mark((function e(){var r,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=F(t),e.next=3,i(n.id);case 3:null!==(o=e.sent)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.status?B("Succesfully Deleted"):(console.log("err",o),K("OOPS!! Something went wrong")),c(!a);case 6:case"end":return e.stop()}}),e)}))),(function(){}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(e,t){return{render:function(a,n){if("invoiceNumber"==e.name){var r,c="receipts"==t||"payments"==t?null===(r=n.invoice)||void 0===r?void 0:r.id:n.id;return Object(V.jsx)("div",{children:Object(V.jsx)("a",{onClick:function(){return function(e){x(e),j(!0)}(c)},className:"underline text-blue-900",children:a})})}return"number"===e.inputType?Object(V.jsx)("div",{children:a?a.toLocaleString("en-IN"):a}):"date"===e.inputType?Object(V.jsx)("div",{children:a?T()(a).format("DD-MM-YYYY"):null}):"companyId"===e.name?"".concat(null===n||void 0===n||null===(i=n.company)||void 0===i?void 0:i.division," - ").concat(null===n||void 0===n||null===(o=n.company)||void 0===o?void 0:o.name):"customerId"===e.name?"".concat(null!==n&&void 0!==n&&n.customer?null===n||void 0===n?void 0:n.customer.name:""):a;var i,o}}},ue=function(e,t){if("payment-receipts"==e)return W}(t),de=ue.map((function(e){return Object(m.a)({title:Object(V.jsx)(E.a.Text,{ellipsis:!0,title:e.label,children:z(e,t)}),dataIndex:e.name,key:e.name,width:"150px"},se(e,t))}));i||de.push({title:"Action",key:"operation",width:"100px",render:function(e){return Object(V.jsxs)("div",{className:"float-right",children:[Object(V.jsx)(D.a,{type:"primary",onClick:function(){return function(e){r(Object(m.a)({},e))}(e)},title:"Edit",children:Object(V.jsx)(J.a,{})},"edit"+e.id),Object(V.jsx)(D.a,{type:"secondary",onClick:function(){return _e(e)},className:"ml-2",title:"Delete",children:Object(V.jsx)(le.a,{})},"delete"+e.id)]})}});for(var be=[10,20,50,100],je=[];be.length>0&&be[0]<G;)je.push(be[0]+""),be.shift();return G>10&&je.push(G+""),Object(V.jsx)("div",{children:Object(V.jsxs)("div",{className:"site-layout-background p-5 mt-1",children:[Object(V.jsx)(Ue,{level:3,style:{color:"rgba(107, 114, 128, var(--tw-text-opacity))"},className:"border-b-2",children:Q(t)}),Object(V.jsx)("div",{className:"mb-2",children:Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:12,children:"payment-receipts"===t?Object(V.jsx)(Ne,{filter:ne,setFilter:re}):Object(V.jsx)(k.a,{placeholder:"Search...",value:$,onChange:function(e){return ee(e.target.value)}})})})}),Object(V.jsx)(y.a,{className:"w-full",children:Object(V.jsx)(g.a,{span:24,children:Object(V.jsx)(P.a,{dataSource:s,columns:de,bordered:!0,pagination:{position:["bottomRight","topRight"],pageSizeOptions:je,current:w,pageSize:S,onChange:function(e){C(e)},onShowSizeChange:function(e,t){R(t),C(1)},total:G,showSizeChanger:!0},rowKey:function(e){return e.id+((new Date).getTime()+1e4*Math.random())}})})})]})})},Fe=s.a.Header,Ye=s.a.Content,ze=(s.a.Footer,s.a.Sider),Qe=function(){var e=Object(n.useState)(!1),t=Object(_.a)(e,2),a=t[0],r=t[1];return Object(V.jsxs)(s.a,{className:"h-screen",children:[Object(V.jsx)(ze,{collapsible:!0,collapsed:a,onCollapse:function(e){return r(e)},children:Object(V.jsx)(ie,{})}),Object(V.jsxs)(s.a,{className:"site-layout",children:[Object(V.jsx)(Fe,{className:"site-layout-background",style:{padding:0},children:Object(V.jsxs)(u.a,{mode:"horizontal",style:{float:"right",width:"auto"},children:[Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(Oe.a,{})},"notification"),Object(V.jsx)(u.a.Item,{icon:Object(V.jsx)(pe.a,{})},"mail"),Object(V.jsx)(u.a.Item,{children:Object(V.jsx)(d.a,{size:30,icon:Object(V.jsx)(fe.a,{})})},"profile")]})}),Object(V.jsxs)(Ye,{style:{margin:"0 16px"},children:[Object(V.jsx)(b.a,{style:{margin:"16px 0"},children:Object(V.jsx)(b.a.Item,{children:"Home"})}),Object(V.jsx)("div",{style:{padding:10},children:Object(V.jsxs)(l.c,{children:[Object(V.jsx)(l.a,{exact:!0,path:"/",children:Object(V.jsx)(Z,{})}),Object(V.jsx)(l.a,{exact:!0,path:"/customers",children:Object(V.jsx)(ue,{})}),Object(V.jsx)(l.a,{exact:!0,path:"/milk-category",children:Object(V.jsx)(me,{})}),Object(V.jsx)(l.a,{exact:!0,path:"/invoices",children:Object(V.jsx)(Le,{type:"sale"})}),Object(V.jsx)(l.a,{exact:!0,path:"/stocks",children:Object(V.jsx)(Be,{})}),Object(V.jsx)(l.a,{exact:!0,path:"/payments",children:Object(V.jsx)(qe,{page:"payment-receipts",reload:!1,noaction:!0})}),Object(V.jsx)(l.a,{exact:!0,path:"/purchases",children:Object(V.jsx)(Le,{type:"purchase"})})]})})]})]})]})};i.a.render(Object(V.jsx)(r.a.StrictMode,{children:Object(V.jsx)(o.a,{children:Object(V.jsx)(Qe,{})})}),document.getElementById("root"))},62:function(e,t,a){"use strict";var n=a(1),r=a(10),c=a(103),i=a(4),o=["label","lcol","icol","placeholder"];t.a=function(e){var t=e.label,a=e.lcol,_=e.icol,l=e.placeholder,s=Object(r.a)(e,o);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(c.a,{span:a||4,className:"mb-3",children:Object(i.jsx)("label",{className:"block font-semibold mt-5 text-right mr-10",children:t})}),Object(i.jsx)(c.a,{span:_||8,className:"mb-3",children:Object(i.jsx)("input",Object(n.a)(Object(n.a)({},s),{},{placeholder:l||t,className:"w-full py-2 px-2 mt-2 border-2"}))})]})}},97:function(e,t,a){"use strict";var n=a(1),r=a(10),c=a(87),i=a(103),o=a(4),_=["label","lcol","icol","option","selected"],l=c.a.Option;t.a=function(e){var t=e.label,a=e.lcol,s=e.icol,u=e.option,d=(e.selected,Object(r.a)(e,_));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(i.a,{span:a||4,className:"mb-3",children:Object(o.jsx)("label",{className:"block font-semibold mt-5 text-right mr-10",children:t})}),Object(o.jsx)(i.a,{span:s||8,className:"mb-3",children:Object(o.jsx)("div",{className:"mt-5",children:Object(o.jsx)(c.a,Object(n.a)(Object(n.a)({className:"w-full",placeholder:t},d),{},{children:u.map((function(e,t){return Object(o.jsx)(l,{value:e.value,children:e.text},t)}))}))})})]})}}},[[329,1,2]]]);
//# sourceMappingURL=main.596beafc.chunk.js.map